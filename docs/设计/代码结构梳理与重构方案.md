# ä»£ç ç»“æ„æ¢³ç†ä¸é‡æ„æ–¹æ¡ˆ

## ğŸ“‹ å½“å‰é¡¹ç›®ç»“æ„åˆ†æ

### 1. åç«¯APIæœåŠ¡ï¼ˆ`app/` ç›®å½•ï¼‰
- **ä½ç½®**ï¼š`app/`
- **æŠ€æœ¯æ ˆ**ï¼šFastAPI
- **åŠŸèƒ½**ï¼šæä¾›RESTful APIæ¥å£
- **ä¸»è¦æ¨¡å—**ï¼š
  - `api/` - APIè·¯ç”±æ¨¡å—
  - `services/` - ä¸šåŠ¡é€»è¾‘æœåŠ¡
  - `models/` - æ•°æ®æ¨¡å‹å’ŒONNXæ¨¡å‹æ–‡ä»¶
  - `utils/` - å·¥å…·å‡½æ•°
  - `main.py` - åº”ç”¨å…¥å£

### 2. Webé¡µé¢ï¼ˆ`web/` ç›®å½•ï¼‰
å½“å‰æ‰€æœ‰Webé¡µé¢æ··åœ¨ä¸€èµ·ï¼Œéœ€è¦æ‹†åˆ†ï¼š

#### 2.1 ç®¡ç†åå°é¡µé¢ï¼ˆåç«¯æœåŠ¡ç›¸å…³ï¼‰
- `index.html` - åç«¯ç®¡ç†ç³»ç»Ÿä¸»é¡µé¢ï¼ˆç»Ÿè®¡ã€æµ‹è¯•ã€é…ç½®ï¼‰
- `login.html` - ç®¡ç†å‘˜ç™»å½•é¡µé¢
- `app.js` - å‰ç«¯JavaScriptï¼ˆä¸»è¦ç”¨äºç®¡ç†åå°ï¼‰

#### 2.2 å¾®ä¿¡å…¬ä¼—å·é¡µé¢ï¼ˆç”¨æˆ·ç«¯ç›¸å…³ï¼‰
- `member.html` - ä¼šå‘˜å¼€é€šé¡µé¢
- `credits.html` - è´­ä¹°é¢åº¦é¡µé¢
- `credits_info.html` - æˆ‘çš„é¢åº¦é¡µé¢
- `pay-test.html` - æ”¯ä»˜æµ‹è¯•é¡µé¢

#### 2.3 å…±äº«é™æ€èµ„æº
- `imageclassify.png` - å›¾æ ‡
- `imagenet_classes.json` - ImageNetåˆ†ç±»æ•°æ®
- `imagenet_classes.txt` - ImageNetåˆ†ç±»æ•°æ®ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰

---

## ğŸ¯ é‡æ„ç›®æ ‡

### ç›®æ ‡1ï¼šå°†Webé¡µé¢ä¸åç«¯APIæœåŠ¡åˆ†ç¦»
- åç«¯APIæœåŠ¡ä¸“æ³¨äºæä¾›RESTful API
- Webé¡µé¢ç‹¬ç«‹éƒ¨ç½²ï¼Œé€šè¿‡APIè°ƒç”¨åç«¯æœåŠ¡

### ç›®æ ‡2ï¼šå°†Webé¡µé¢åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ¨¡å—
1. **ç®¡ç†åå°æ¨¡å—**ï¼šåç«¯æœåŠ¡ç®¡ç†ç•Œé¢
2. **å¾®ä¿¡å…¬ä¼—å·æ¨¡å—**ï¼šç”¨æˆ·ç«¯H5é¡µé¢

---

## ğŸ“ é‡æ„åçš„ç›®å½•ç»“æ„

```
ImageClassifierBackend/
â”œâ”€â”€ app/                          # åç«¯APIæœåŠ¡ï¼ˆä¿æŒä¸å˜ï¼‰
â”‚   â”œâ”€â”€ api/                      # APIè·¯ç”±
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.py                   # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ web/                          # Webå‰ç«¯ï¼ˆé‡æ„åï¼‰
â”‚   â”œâ”€â”€ admin/                    # ç®¡ç†åå°æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.html            # ç®¡ç†åå°ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ login.html            # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ app.js                # ç®¡ç†åå°JS
â”‚   â”‚   â””â”€â”€ assets/               # ç®¡ç†åå°é™æ€èµ„æº
â”‚   â”‚       â””â”€â”€ imageclassify.png
â”‚   â”‚
â”‚   â”œâ”€â”€ wechat/                   # å¾®ä¿¡å…¬ä¼—å·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ member.html           # ä¼šå‘˜å¼€é€šé¡µé¢
â”‚   â”‚   â”œâ”€â”€ credits.html          # è´­ä¹°é¢åº¦é¡µé¢
â”‚   â”‚   â”œâ”€â”€ credits_info.html     # æˆ‘çš„é¢åº¦é¡µé¢
â”‚   â”‚   â”œâ”€â”€ pay-test.html         # æ”¯ä»˜æµ‹è¯•é¡µé¢
â”‚   â”‚   â””â”€â”€ assets/               # å¾®ä¿¡å…¬ä¼—å·é™æ€èµ„æº
â”‚   â”‚       â””â”€â”€ (å¦‚æœéœ€è¦)
â”‚   â”‚
â”‚   â””â”€â”€ shared/                   # å…±äº«èµ„æº
â”‚       â”œâ”€â”€ imagenet_classes.json
â”‚       â””â”€â”€ imagenet_classes.txt
â”‚
â”œâ”€â”€ static/                        # åç«¯é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ images/                    # å›¾åƒç¼–è¾‘ç»“æœç­‰
â”‚
â””â”€â”€ ... (å…¶ä»–æ–‡ä»¶)
```

---

## ğŸ”§ é‡æ„æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºæ–°çš„ç›®å½•ç»“æ„

```bash
# åˆ›å»ºç®¡ç†åå°ç›®å½•
mkdir -p web/admin/assets

# åˆ›å»ºå¾®ä¿¡å…¬ä¼—å·ç›®å½•
mkdir -p web/wechat/assets

# åˆ›å»ºå…±äº«èµ„æºç›®å½•
mkdir -p web/shared
```

### æ­¥éª¤2ï¼šç§»åŠ¨æ–‡ä»¶

#### 2.1 ç®¡ç†åå°æ–‡ä»¶
```bash
# ç§»åŠ¨ç®¡ç†åå°ç›¸å…³æ–‡ä»¶
mv web/index.html web/admin/index.html
mv web/login.html web/admin/login.html
mv web/app.js web/admin/app.js
mv web/imageclassify.png web/admin/assets/imageclassify.png
```

#### 2.2 å¾®ä¿¡å…¬ä¼—å·æ–‡ä»¶
```bash
# ç§»åŠ¨å¾®ä¿¡å…¬ä¼—å·ç›¸å…³æ–‡ä»¶
mv web/member.html web/wechat/member.html
mv web/credits.html web/wechat/credits.html
mv web/credits_info.html web/wechat/credits_info.html
mv web/pay-test.html web/wechat/pay-test.html
```

#### 2.3 å…±äº«èµ„æº
```bash
# ç§»åŠ¨å…±äº«èµ„æº
mv web/imagenet_classes.json web/shared/imagenet_classes.json
mv web/imagenet_classes.txt web/shared/imagenet_classes.txt
```

### æ­¥éª¤3ï¼šä¿®æ”¹åç«¯è·¯ç”±é…ç½®

ä¿®æ”¹ `app/main.py`ï¼Œåˆ†åˆ«æŒ‚è½½ä¸¤ä¸ªæ¨¡å—çš„é™æ€æ–‡ä»¶ï¼š

```python
# ç®¡ç†åå°é™æ€æ–‡ä»¶
admin_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), "web", "admin")
if os.path.exists(admin_path):
    app.mount("/admin", StaticFiles(directory=admin_path), name="admin")
    
    @app.get("/admin/", tags=["admin"])
    async def admin_index():
        """ç®¡ç†åå°é¦–é¡µ"""
        return FileResponse(os.path.join(admin_path, "index.html"))
    
    @app.get("/admin/login.html", tags=["admin"])
    async def admin_login():
        """ç®¡ç†åå°ç™»å½•é¡µ"""
        return FileResponse(os.path.join(admin_path, "login.html"))

# å¾®ä¿¡å…¬ä¼—å·é™æ€æ–‡ä»¶
wechat_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), "web", "wechat")
if os.path.exists(wechat_path):
    app.mount("/wechat", StaticFiles(directory=wechat_path), name="wechat")
    
    @app.get("/wechat/member.html", tags=["wechat"])
    async def wechat_member():
        """ä¼šå‘˜å¼€é€šé¡µé¢"""
        return FileResponse(os.path.join(wechat_path, "member.html"))
    
    @app.get("/wechat/credits.html", tags=["wechat"])
    async def wechat_credits():
        """è´­ä¹°é¢åº¦é¡µé¢"""
        return FileResponse(os.path.join(wechat_path, "credits.html"))
    
    @app.get("/wechat/credits_info.html", tags=["wechat"])
    async def wechat_credits_info():
        """æˆ‘çš„é¢åº¦é¡µé¢"""
        return FileResponse(os.path.join(wechat_path, "credits_info.html"))

# å…±äº«èµ„æº
shared_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), "web", "shared")
if os.path.exists(shared_path):
    app.mount("/shared", StaticFiles(directory=shared_path), name="shared")
```

### æ­¥éª¤4ï¼šä¿®æ”¹å‰ç«¯æ–‡ä»¶ä¸­çš„è·¯å¾„å¼•ç”¨

#### 4.1 ç®¡ç†åå°æ–‡ä»¶ï¼ˆ`web/admin/`ï¼‰
- `index.html` - æ›´æ–°é™æ€èµ„æºè·¯å¾„
- `login.html` - æ›´æ–°é™æ€èµ„æºè·¯å¾„
- `app.js` - æ›´æ–°APIè·¯å¾„å’Œé™æ€èµ„æºè·¯å¾„

#### 4.2 å¾®ä¿¡å…¬ä¼—å·æ–‡ä»¶ï¼ˆ`web/wechat/`ï¼‰
- `member.html` - æ›´æ–°APIè·¯å¾„
- `credits.html` - æ›´æ–°APIè·¯å¾„
- `credits_info.html` - æ›´æ–°APIè·¯å¾„
- `pay-test.html` - æ›´æ–°APIè·¯å¾„

### æ­¥éª¤5ï¼šæ›´æ–°æ ¹è·¯å¾„è·¯ç”±

ä¿®æ”¹ `app/main.py` ä¸­çš„æ ¹è·¯å¾„å¤„ç†ï¼š

```python
@app.get("/", tags=["root"])
async def root():
    """æ ¹è·¯å¾„ - é‡å®šå‘åˆ°ç®¡ç†åå°æˆ–è¿”å›APIä¿¡æ¯"""
    return {
        "service": "Image Classifier Backend",
        "version": "1.0.0",
        "status": "running",
        "docs": "/docs",
        "health": "/api/v1/health",
        "admin": "/admin/",
        "wechat": {
            "member": "/wechat/member.html",
            "credits": "/wechat/credits.html",
            "credits_info": "/wechat/credits_info.html"
        }
    }
```

---

## ğŸ”„ è®¿é—®è·¯å¾„å˜æ›´

### é‡æ„å‰
- ç®¡ç†åå°ï¼š`http://domain.com/` æˆ– `http://domain.com/static/index.html`
- ç™»å½•é¡µï¼š`http://domain.com/static/login.html`
- ä¼šå‘˜é¡µï¼š`http://domain.com/member.html`
- é¢åº¦é¡µï¼š`http://domain.com/credits.html`

### é‡æ„å
- ç®¡ç†åå°ï¼š`http://domain.com/admin/`
- ç™»å½•é¡µï¼š`http://domain.com/admin/login.html`
- ä¼šå‘˜é¡µï¼š`http://domain.com/wechat/member.html`
- é¢åº¦é¡µï¼š`http://domain.com/wechat/credits.html`
- æˆ‘çš„é¢åº¦ï¼š`http://domain.com/wechat/credits_info.html`

---

## ğŸ“ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶
- [ ] `app/main.py` - æ›´æ–°é™æ€æ–‡ä»¶æŒ‚è½½å’Œè·¯ç”±

### å‰ç«¯æ–‡ä»¶
- [ ] `web/admin/index.html` - æ›´æ–°é™æ€èµ„æºè·¯å¾„
- [ ] `web/admin/login.html` - æ›´æ–°é™æ€èµ„æºè·¯å¾„
- [ ] `web/admin/app.js` - æ›´æ–°APIè·¯å¾„å’Œé™æ€èµ„æºè·¯å¾„
- [ ] `web/wechat/member.html` - æ›´æ–°APIè·¯å¾„å’Œé¡µé¢è·³è½¬è·¯å¾„
- [ ] `web/wechat/credits.html` - æ›´æ–°APIè·¯å¾„å’Œé¡µé¢è·³è½¬è·¯å¾„
- [ ] `web/wechat/credits_info.html` - æ›´æ–°APIè·¯å¾„å’Œé¡µé¢è·³è½¬è·¯å¾„
- [ ] `web/wechat/pay-test.html` - æ›´æ–°APIè·¯å¾„

---

## âœ… é‡æ„åçš„ä¼˜åŠ¿

1. **èŒè´£æ¸…æ™°**ï¼šç®¡ç†åå°å’Œå¾®ä¿¡å…¬ä¼—å·é¡µé¢å®Œå…¨åˆ†ç¦»
2. **æ˜“äºç»´æŠ¤**ï¼šæ¯ä¸ªæ¨¡å—ç‹¬ç«‹ï¼Œä¿®æ”¹ä¸å½±å“å…¶ä»–æ¨¡å—
3. **ä¾¿äºéƒ¨ç½²**ï¼šå¯ä»¥ç‹¬ç«‹éƒ¨ç½²Webå‰ç«¯å’Œåç«¯API
4. **è·¯å¾„è§„èŒƒ**ï¼šç»Ÿä¸€çš„URLè·¯å¾„è§„èŒƒï¼Œæ˜“äºç†è§£
5. **æ‰©å±•æ€§å¥½**ï¼šæœªæ¥å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„Webæ¨¡å—

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. å®Œå…¨åˆ†ç¦»éƒ¨ç½²
- å°†Webå‰ç«¯éƒ¨ç½²åˆ°ç‹¬ç«‹çš„WebæœåŠ¡å™¨ï¼ˆNginxï¼‰
- åç«¯APIåªæä¾›RESTfulæ¥å£
- é€šè¿‡CORSé…ç½®å…è®¸è·¨åŸŸè®¿é—®

### 2. å‰ç«¯å·¥ç¨‹åŒ–
- ä½¿ç”¨å‰ç«¯æ„å»ºå·¥å…·ï¼ˆWebpack/Viteï¼‰
- æ¨¡å—åŒ–å¼€å‘
- ä»£ç å‹ç¼©å’Œä¼˜åŒ–

### 3. ç‹¬ç«‹åŸŸå
- ç®¡ç†åå°ï¼š`admin.xintuxiangce.top`
- å¾®ä¿¡å…¬ä¼—å·ï¼š`www.xintuxiangce.top` æˆ– `m.xintuxiangce.top`
- APIæœåŠ¡ï¼š`api.xintuxiangce.top`

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

é‡æ„å®Œæˆåï¼Œè¯·æ£€æŸ¥ï¼š

- [ ] æ‰€æœ‰æ–‡ä»¶å·²ç§»åŠ¨åˆ°æ–°ç›®å½•
- [ ] åç«¯è·¯ç”±é…ç½®å·²æ›´æ–°
- [ ] å‰ç«¯æ–‡ä»¶ä¸­çš„è·¯å¾„å¼•ç”¨å·²æ›´æ–°
- [ ] é™æ€èµ„æºè·¯å¾„å·²æ›´æ–°
- [ ] APIè°ƒç”¨è·¯å¾„æ­£ç¡®
- [ ] é¡µé¢è·³è½¬è·¯å¾„æ­£ç¡®
- [ ] æµ‹è¯•ç®¡ç†åå°åŠŸèƒ½æ­£å¸¸
- [ ] æµ‹è¯•å¾®ä¿¡å…¬ä¼—å·é¡µé¢åŠŸèƒ½æ­£å¸¸
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-XX  
**ç»´æŠ¤è€…**: ImageClassifier Team

