# æœåŠ¡å™¨æ•°æ®åŒæ­¥æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä»WebæœåŠ¡å™¨ï¼ˆä¸»æœåŠ¡å™¨ï¼‰åŒæ­¥æ•°æ®åˆ°AppæœåŠ¡å™¨ï¼ˆä»æœåŠ¡å™¨ï¼‰ï¼š
- **imagesç›®å½•åŒæ­¥**ï¼šä½¿ç”¨rsyncå®šæœŸåŒæ­¥
- **MySQLæ•°æ®åŒæ­¥**ï¼šå»ºç«‹ä¸»ä»å¤åˆ¶ï¼ˆWebä¸ºä¸»ï¼ŒAppä¸ºä»ï¼‰

---

## ğŸ–¼ï¸ Imagesç›®å½•åŒæ­¥ï¼ˆrsyncï¼‰

### æ¶æ„è¯´æ˜

#### æ–¹æ¡ˆ1ï¼šå•å‘åŒæ­¥ï¼ˆæ¨èï¼‰

```
WebæœåŠ¡å™¨ (ä¸»)
â”œâ”€â”€ /path/to/web/images/  â† æºç›®å½•
â””â”€â”€ rsyncæ¨é€ â†’ AppæœåŠ¡å™¨

AppæœåŠ¡å™¨ (ä»)
â””â”€â”€ /path/to/web/images/  â† ç›®æ ‡ç›®å½•ï¼ˆåŒæ­¥æ¥æ”¶ï¼‰
```

**é€‚ç”¨åœºæ™¯**ï¼šWebæœåŠ¡å™¨ç”Ÿæˆimagesï¼ŒAppæœåŠ¡å™¨åªè¯»

#### æ–¹æ¡ˆ2ï¼šåŒå‘åŒæ­¥

```
WebæœåŠ¡å™¨ â†â†’ AppæœåŠ¡å™¨
    â†“           â†“
 å®šæ—¶ä»»åŠ¡1   å®šæ—¶ä»»åŠ¡2
(Webâ†’App)   (Appâ†’Web)
```

**é€‚ç”¨åœºæ™¯**ï¼šä¸¤è¾¹éƒ½å¯èƒ½ç”Ÿæˆimagesï¼Œéœ€è¦åŒå‘åŒæ­¥

**æ³¨æ„**ï¼šåŒå‘åŒæ­¥å¯èƒ½äº§ç”Ÿå†²çªï¼Œéœ€è¦è°¨æ…ä½¿ç”¨ã€‚è¯¦è§ [rsyncåŒå‘åŒæ­¥è¯´æ˜](./rsyncåŒå‘åŒæ­¥è¯´æ˜.md)

### å‰ç½®æ¡ä»¶

- âœ… WebæœåŠ¡å™¨å’ŒAppæœåŠ¡å™¨ä¹‹é—´å·²é…ç½®SSHå…å¯†ç™»å½•ï¼ˆrootç”¨æˆ·ï¼‰
- âœ… ç¡®è®¤imagesç›®å½•çš„å®Œæ•´è·¯å¾„
- âœ… ç¡®è®¤AppæœåŠ¡å™¨æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´

### é…ç½®æ­¥éª¤

#### 1. é€‰æ‹©åŒæ­¥æ–¹æ¡ˆ

**å•å‘åŒæ­¥ï¼ˆæ¨èï¼‰**ï¼šä½¿ç”¨ `scripts/sync-images.sh`  
**åŒå‘åŒæ­¥**ï¼šä½¿ç”¨ `scripts/sync-images-bidirectional.sh`

#### 2. åœ¨AppæœåŠ¡å™¨ä¸Šåˆ›å»ºåŒæ­¥è„šæœ¬

**å•å‘åŒæ­¥è„šæœ¬**ï¼š`/opt/sync-images.sh`

```bash
#!/bin/bash
# Imagesç›®å½•åŒæ­¥è„šæœ¬ï¼ˆåœ¨AppæœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰

# é…ç½®å˜é‡
WEB_SERVER="web_server_ip_or_hostname"  # æ›¿æ¢ä¸ºWebæœåŠ¡å™¨IPæˆ–ä¸»æœºå
WEB_IMAGES_PATH="/path/to/web/images"   # WebæœåŠ¡å™¨ä¸Šçš„imagesç›®å½•è·¯å¾„
APP_IMAGES_PATH="/path/to/web/images"   # AppæœåŠ¡å™¨ä¸Šçš„imagesç›®å½•è·¯å¾„
LOG_FILE="/var/log/sync-images.log"

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p $(dirname $LOG_FILE)

# æ‰§è¡ŒåŒæ­¥
echo "[$(date '+%Y-%m-%d %H:%M:%S')] å¼€å§‹åŒæ­¥imagesç›®å½•..." >> $LOG_FILE

rsync -avz --delete \
    --exclude='*.tmp' \
    --exclude='*.log' \
    root@${WEB_SERVER}:${WEB_IMAGES_PATH}/ \
    ${APP_IMAGES_PATH}/

if [ $? -eq 0 ]; then
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] åŒæ­¥æˆåŠŸ" >> $LOG_FILE
else
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] åŒæ­¥å¤±è´¥ï¼Œé”™è¯¯ä»£ç : $?" >> $LOG_FILE
    exit 1
fi
```

#### 3. é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆcrontabï¼‰

åœ¨AppæœåŠ¡å™¨ä¸Šé…ç½®å®šæ—¶åŒæ­¥ï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯5åˆ†é’ŸåŒæ­¥ä¸€æ¬¡ï¼‰
*/5 * * * * /opt/sync-images.sh >> /var/log/sync-images-cron.log 2>&1

# æˆ–è€…æ¯å°æ—¶åŒæ­¥ä¸€æ¬¡
0 * * * * /opt/sync-images.sh >> /var/log/sync-images-cron.log 2>&1
```

#### 4. æ‰‹åŠ¨æµ‹è¯•åŒæ­¥

```bash
# åœ¨AppæœåŠ¡å™¨ä¸Šæ‰§è¡Œ
chmod +x /opt/sync-images.sh
/opt/sync-images.sh

# æŸ¥çœ‹åŒæ­¥æ—¥å¿—
tail -f /var/log/sync-images.log
```

### åŒå‘åŒæ­¥é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦åŒå‘åŒæ­¥ï¼Œä½¿ç”¨ `scripts/sync-images-bidirectional.sh`ï¼š

```bash
# ç¼–è¾‘è„šæœ¬é…ç½®
vim scripts/sync-images-bidirectional.sh

# è®¾ç½®åŒæ­¥æ–¹å‘
SYNC_DIRECTION="bidirectional"  # æˆ– "web-to-app", "app-to-web"

# è®¾ç½®å†²çªå¤„ç†ç­–ç•¥
CONFLICT_RESOLUTION="web-wins"  # æˆ– "app-wins"

# æ‰§è¡ŒåŒæ­¥
chmod +x scripts/sync-images-bidirectional.sh
./scripts/sync-images-bidirectional.sh
```

**æ³¨æ„**ï¼šåŒå‘åŒæ­¥éœ€è¦è°¨æ…é…ç½®ï¼Œé¿å…å†²çªã€‚è¯¦è§ [rsyncåŒå‘åŒæ­¥è¯´æ˜](./rsyncåŒå‘åŒæ­¥è¯´æ˜.md)

### rsyncå‚æ•°è¯´æ˜

- `-a`: å½’æ¡£æ¨¡å¼ï¼Œä¿æŒæ–‡ä»¶å±æ€§
- `-v`: è¯¦ç»†è¾“å‡º
- `-z`: å‹ç¼©ä¼ è¾“
- `-h`: äººç±»å¯è¯»çš„æ–‡ä»¶å¤§å°
- `--delete`: åˆ é™¤ç›®æ ‡ç›®å½•ä¸­æºç›®å½•ä¸å­˜åœ¨çš„æ–‡ä»¶
- `--exclude`: æ’é™¤ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•
- `--progress`: æ˜¾ç¤ºåŒæ­¥è¿›åº¦

---

## ğŸ—„ï¸ MySQLä¸»ä»åŒæ­¥é…ç½®

### æ¶æ„è¯´æ˜

```
WebæœåŠ¡å™¨ (MySQLä¸»æœåŠ¡å™¨)
â”œâ”€â”€ MySQL Master
â”‚   â”œâ”€â”€ å†™å…¥æ“ä½œ
â”‚   â””â”€â”€ binlog â†’ å¤åˆ¶åˆ°ä»æœåŠ¡å™¨
â””â”€â”€ é…ç½®: server-id=1

AppæœåŠ¡å™¨ (MySQLä»æœåŠ¡å™¨)
â”œâ”€â”€ MySQL Slave
â”‚   â”œâ”€â”€ åªè¯»æ“ä½œ
â”‚   â””â”€â”€ ä»ä¸»æœåŠ¡å™¨åŒæ­¥æ•°æ®
â””â”€â”€ é…ç½®: server-id=2
```

### å‰ç½®æ¡ä»¶

- âœ… WebæœåŠ¡å™¨å’ŒAppæœåŠ¡å™¨éƒ½å®‰è£…äº†MySQL 8.0+
- âœ… ç¡®è®¤MySQLæœåŠ¡è¿è¡Œæ­£å¸¸
- âœ… ç¡®è®¤æ•°æ®åº“åç§°å’Œç”¨æˆ·æƒé™
- âœ… ç¡®è®¤æœåŠ¡å™¨ä¹‹é—´ç½‘ç»œè¿é€šï¼ˆMySQLç«¯å£3306ï¼‰

### é…ç½®æ­¥éª¤

#### æ­¥éª¤1ï¼šåœ¨WebæœåŠ¡å™¨ï¼ˆä¸»æœåŠ¡å™¨ï¼‰ä¸Šé…ç½®

##### 1.1 ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶

```bash
# ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶
vim /etc/mysql/mysql.conf.d/mysqld.cnf
# æˆ–è€…
vim /etc/my.cnf
```

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```ini
[mysqld]
# æœåŠ¡å™¨å”¯ä¸€IDï¼ˆä¸»æœåŠ¡å™¨ï¼‰
server-id = 1

# å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—
log-bin = mysql-bin
binlog_format = ROW

# éœ€è¦åŒæ­¥çš„æ•°æ®åº“ï¼ˆå¯é€‰ï¼Œä¸é…ç½®åˆ™åŒæ­¥æ‰€æœ‰æ•°æ®åº“ï¼‰
binlog-do-db = image_classifier

# å¿½ç•¥çš„æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
# binlog-ignore-db = mysql
# binlog-ignore-db = information_schema
# binlog-ignore-db = performance_schema

# äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰
expire_logs_days = 7

# æœ€å¤§äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å¤§å°
max_binlog_size = 100M
```

##### 1.2 é‡å¯MySQLæœåŠ¡

```bash
systemctl restart mysql
# æˆ–è€…
systemctl restart mysqld
```

##### 1.3 åˆ›å»ºå¤åˆ¶ç”¨æˆ·

```bash
# ç™»å½•MySQL
mysql -u root -p

# åˆ›å»ºå¤åˆ¶ç”¨æˆ·
CREATE USER 'repl_user'@'%' IDENTIFIED BY 'your_secure_password';

# æˆäºˆå¤åˆ¶æƒé™
GRANT REPLICATION SLAVE ON *.* TO 'repl_user'@'%';

# åˆ·æ–°æƒé™
FLUSH PRIVILEGES;

# æŸ¥çœ‹ä¸»æœåŠ¡å™¨çŠ¶æ€
SHOW MASTER STATUS;
```

**é‡è¦**ï¼šè®°å½•ä¸‹ `File` å’Œ `Position` çš„å€¼ï¼Œåç»­é…ç½®ä»æœåŠ¡å™¨æ—¶éœ€è¦ç”¨åˆ°ã€‚

ç¤ºä¾‹è¾“å‡ºï¼š
```
+------------------+----------+--------------+------------------+-------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------------+----------+--------------+------------------+-------------------+
| mysql-bin.000001 |      154 |              |                  |                   |
+------------------+----------+--------------+------------------+-------------------+
```

##### 1.4 å¯¼å‡ºæ•°æ®åº“åˆå§‹æ•°æ®ï¼ˆå¯é€‰ï¼Œå¦‚æœä»æœåŠ¡å™¨å·²æœ‰æ•°æ®å¯è·³è¿‡ï¼‰

```bash
# åœ¨WebæœåŠ¡å™¨ä¸Šå¯¼å‡ºæ•°æ®åº“
mysqldump -u root -p --master-data=2 --single-transaction \
    image_classifier > /tmp/image_classifier_master.sql

# å°†SQLæ–‡ä»¶ä¼ è¾“åˆ°AppæœåŠ¡å™¨
scp /tmp/image_classifier_master.sql root@app_server:/tmp/
```

---

#### æ­¥éª¤2ï¼šåœ¨AppæœåŠ¡å™¨ï¼ˆä»æœåŠ¡å™¨ï¼‰ä¸Šé…ç½®

##### 2.1 ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶

```bash
# ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶
vim /etc/mysql/mysql.conf.d/mysqld.cnf
# æˆ–è€…
vim /etc/my.cnf
```

æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```ini
[mysqld]
# æœåŠ¡å™¨å”¯ä¸€IDï¼ˆä»æœåŠ¡å™¨ï¼Œå¿…é¡»ä¸ä¸»æœåŠ¡å™¨ä¸åŒï¼‰
server-id = 2

# ä¸­ç»§æ—¥å¿—
relay-log = mysql-relay-bin
log-slave-updates = 1

# åªè¯»æ¨¡å¼ï¼ˆä»æœåŠ¡å™¨å»ºè®®è®¾ç½®ä¸ºåªè¯»ï¼‰
read-only = 1

# éœ€è¦åŒæ­¥çš„æ•°æ®åº“ï¼ˆå¯é€‰ï¼Œä¸é…ç½®åˆ™åŒæ­¥æ‰€æœ‰æ•°æ®åº“ï¼‰
replicate-do-db = image_classifier

# å¿½ç•¥çš„æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
# replicate-ignore-db = mysql
# replicate-ignore-db = information_schema
# replicate-ignore-db = performance_schema
```

##### 2.2 é‡å¯MySQLæœåŠ¡

```bash
systemctl restart mysql
# æˆ–è€…
systemctl restart mysqld
```

##### 2.3 å¯¼å…¥åˆå§‹æ•°æ®ï¼ˆå¦‚æœä»æœåŠ¡å™¨æ²¡æœ‰æ•°æ®ï¼‰

```bash
# åœ¨AppæœåŠ¡å™¨ä¸Šå¯¼å…¥æ•°æ®åº“
mysql -u root -p image_classifier < /tmp/image_classifier_master.sql
```

##### 2.4 é…ç½®ä¸»ä»å¤åˆ¶

```bash
# ç™»å½•MySQL
mysql -u root -p

# åœæ­¢ä»æœåŠ¡å™¨
STOP SLAVE;

# é…ç½®ä¸»æœåŠ¡å™¨ä¿¡æ¯
# æ›¿æ¢ä»¥ä¸‹å€¼ï¼š
# - MASTER_HOST: WebæœåŠ¡å™¨çš„IPåœ°å€æˆ–ä¸»æœºå
# - MASTER_USER: å¤åˆ¶ç”¨æˆ·åï¼ˆæ­¥éª¤1.3ä¸­åˆ›å»ºçš„ï¼‰
# - MASTER_PASSWORD: å¤åˆ¶ç”¨æˆ·å¯†ç 
# - MASTER_LOG_FILE: æ­¥éª¤1.3ä¸­è®°å½•çš„Fileå€¼
# - MASTER_LOG_POS: æ­¥éª¤1.3ä¸­è®°å½•çš„Positionå€¼

CHANGE MASTER TO
    MASTER_HOST='web_server_ip',
    MASTER_USER='repl_user',
    MASTER_PASSWORD='your_secure_password',
    MASTER_LOG_FILE='mysql-bin.000001',
    MASTER_LOG_POS=154;

# å¯åŠ¨ä»æœåŠ¡å™¨
START SLAVE;

# æŸ¥çœ‹ä»æœåŠ¡å™¨çŠ¶æ€
SHOW SLAVE STATUS\G
```

##### 2.5 éªŒè¯ä¸»ä»åŒæ­¥çŠ¶æ€

æŸ¥çœ‹ä»æœåŠ¡å™¨çŠ¶æ€çš„å…³é”®å­—æ®µï¼š

```sql
SHOW SLAVE STATUS\G
```

**æ­£å¸¸çŠ¶æ€åº”è¯¥æ˜¾ç¤ºï¼š**
- `Slave_IO_Running: Yes`
- `Slave_SQL_Running: Yes`
- `Seconds_Behind_Master: 0`ï¼ˆæˆ–å¾ˆå°çš„æ•°å­—ï¼‰

**å¦‚æœå‡ºç°é”™è¯¯ï¼š**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥å¤åˆ¶ç”¨æˆ·æƒé™
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æŸ¥çœ‹MySQLé”™è¯¯æ—¥å¿—ï¼š`tail -f /var/log/mysql/error.log`

---

## ğŸ”§ ç»´æŠ¤å’Œç›‘æ§

### ç›‘æ§ä¸»ä»åŒæ­¥çŠ¶æ€

#### åœ¨AppæœåŠ¡å™¨ä¸Šåˆ›å»ºç›‘æ§è„šæœ¬

åˆ›å»ºè„šæœ¬ï¼š`/opt/check-mysql-replication.sh`

```bash
#!/bin/bash
# MySQLä¸»ä»åŒæ­¥çŠ¶æ€æ£€æŸ¥è„šæœ¬

LOG_FILE="/var/log/mysql-replication-check.log"
ALERT_EMAIL="admin@example.com"  # å¯é€‰ï¼šå‘Šè­¦é‚®ç®±

# æ£€æŸ¥ä»æœåŠ¡å™¨çŠ¶æ€
STATUS=$(mysql -u root -p'your_mysql_password' -e "SHOW SLAVE STATUS\G" 2>/dev/null)

IO_RUNNING=$(echo "$STATUS" | grep "Slave_IO_Running:" | awk '{print $2}')
SQL_RUNNING=$(echo "$STATUS" | grep "Slave_SQL_Running:" | awk '{print $2}')
SECONDS_BEHIND=$(echo "$STATUS" | grep "Seconds_Behind_Master:" | awk '{print $2}')

echo "[$(date '+%Y-%m-%d %H:%M:%S')] æ£€æŸ¥ä¸»ä»åŒæ­¥çŠ¶æ€..." >> $LOG_FILE

if [ "$IO_RUNNING" != "Yes" ] || [ "$SQL_RUNNING" != "Yes" ]; then
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] âš ï¸ è­¦å‘Šï¼šä¸»ä»åŒæ­¥å¼‚å¸¸ï¼" >> $LOG_FILE
    echo "IO_Running: $IO_RUNNING, SQL_Running: $SQL_RUNNING" >> $LOG_FILE
    
    # å¯é€‰ï¼šå‘é€å‘Šè­¦é‚®ä»¶
    # echo "MySQLä¸»ä»åŒæ­¥å¼‚å¸¸" | mail -s "MySQL Replication Alert" $ALERT_EMAIL
else
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] âœ… ä¸»ä»åŒæ­¥æ­£å¸¸ (å»¶è¿Ÿ: ${SECONDS_BEHIND}ç§’)" >> $LOG_FILE
fi
```

é…ç½®å®šæ—¶æ£€æŸ¥ï¼š

```bash
# æ·»åŠ åˆ°crontabï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰
*/5 * * * * /opt/check-mysql-replication.sh
```

### å¸¸è§é—®é¢˜å¤„ç†

#### 1. ä¸»ä»åŒæ­¥ä¸­æ–­

```sql
-- åœ¨AppæœåŠ¡å™¨ä¸Šæ‰§è¡Œ
STOP SLAVE;
-- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
SHOW SLAVE STATUS\G

-- å¦‚æœæ˜¯å› ä¸ºä¸»æœåŠ¡å™¨æ—¥å¿—ä½ç½®ä¸åŒ¹é…ï¼Œé‡æ–°é…ç½®
CHANGE MASTER TO
    MASTER_HOST='web_server_ip',
    MASTER_USER='repl_user',
    MASTER_PASSWORD='your_secure_password',
    MASTER_LOG_FILE='mysql-bin.000001',
    MASTER_LOG_POS=154;

START SLAVE;
```

#### 2. è·³è¿‡é”™è¯¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

```sql
-- å¦‚æœé‡åˆ°å¯ä»¥å¿½ç•¥çš„é”™è¯¯ï¼Œå¯ä»¥è·³è¿‡
STOP SLAVE;
SET GLOBAL sql_slave_skip_counter = 1;
START SLAVE;
```

#### 3. é‡æ–°åŒæ­¥

å¦‚æœä¸»ä»æ•°æ®å·®å¼‚è¾ƒå¤§ï¼Œå»ºè®®é‡æ–°åŒæ­¥ï¼š

```bash
# 1. åœ¨AppæœåŠ¡å™¨ä¸Šåœæ­¢ä»æœåŠ¡å™¨
mysql -u root -p -e "STOP SLAVE;"

# 2. åœ¨WebæœåŠ¡å™¨ä¸Šå¯¼å‡ºæ•°æ®
mysqldump -u root -p --master-data=2 --single-transaction \
    image_classifier > /tmp/image_classifier_resync.sql

# 3. ä¼ è¾“åˆ°AppæœåŠ¡å™¨
scp /tmp/image_classifier_resync.sql root@app_server:/tmp/

# 4. åœ¨AppæœåŠ¡å™¨ä¸Šå¯¼å…¥
mysql -u root -p image_classifier < /tmp/image_classifier_resync.sql

# 5. é‡æ–°é…ç½®ä¸»ä»å¤åˆ¶ï¼ˆä½¿ç”¨æ–°çš„æ—¥å¿—ä½ç½®ï¼‰
mysql -u root -p -e "
    CHANGE MASTER TO
        MASTER_HOST='web_server_ip',
        MASTER_USER='repl_user',
        MASTER_PASSWORD='your_secure_password',
        MASTER_LOG_FILE='mysql-bin.000001',
        MASTER_LOG_POS=154;
    START SLAVE;
"
```

---

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

### Imagesç›®å½•åŒæ­¥
- [ ] AppæœåŠ¡å™¨ä¸Šå·²åˆ›å»ºåŒæ­¥è„šæœ¬
- [ ] å·²é…ç½®SSHå…å¯†ç™»å½•
- [ ] å·²æµ‹è¯•æ‰‹åŠ¨åŒæ­¥
- [ ] å·²é…ç½®å®šæ—¶ä»»åŠ¡
- [ ] å·²éªŒè¯åŒæ­¥æ—¥å¿—æ­£å¸¸

### MySQLä¸»ä»åŒæ­¥
- [ ] WebæœåŠ¡å™¨MySQLé…ç½®å·²æ›´æ–°ï¼ˆserver-id, log-binï¼‰
- [ ] WebæœåŠ¡å™¨MySQLå·²é‡å¯
- [ ] å·²åˆ›å»ºå¤åˆ¶ç”¨æˆ·å¹¶æˆäºˆæƒé™
- [ ] å·²è®°å½•ä¸»æœåŠ¡å™¨çŠ¶æ€ï¼ˆFile, Positionï¼‰
- [ ] AppæœåŠ¡å™¨MySQLé…ç½®å·²æ›´æ–°ï¼ˆserver-id, relay-logï¼‰
- [ ] AppæœåŠ¡å™¨MySQLå·²é‡å¯
- [ ] å·²å¯¼å…¥åˆå§‹æ•°æ®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] å·²é…ç½®ä¸»ä»å¤åˆ¶å…³ç³»
- [ ] å·²å¯åŠ¨ä»æœåŠ¡å™¨
- [ ] å·²éªŒè¯åŒæ­¥çŠ¶æ€æ­£å¸¸
- [ ] å·²é…ç½®ç›‘æ§è„šæœ¬

---

## ğŸ” å®‰å…¨å»ºè®®

1. **å¤åˆ¶ç”¨æˆ·å¯†ç **ï¼šä½¿ç”¨å¼ºå¯†ç ï¼Œå®šæœŸæ›´æ¢
2. **ç½‘ç»œéš”ç¦»**ï¼šå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨å†…ç½‘IPè¿›è¡ŒåŒæ­¥
3. **é˜²ç«å¢™**ï¼šåªå…è®¸å¿…è¦çš„ç«¯å£ï¼ˆSSH 22, MySQL 3306ï¼‰
4. **æƒé™æ§åˆ¶**ï¼šå¤åˆ¶ç”¨æˆ·åªæˆäºˆå¿…è¦çš„æƒé™
5. **æ—¥å¿—ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥åŒæ­¥æ—¥å¿—ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

---

## ğŸ“ æ•…éšœæ’æŸ¥

### rsyncåŒæ­¥å¤±è´¥
1. æ£€æŸ¥SSHè¿æ¥ï¼š`ssh root@web_server`
2. æ£€æŸ¥ç›®å½•æƒé™
3. æ£€æŸ¥ç£ç›˜ç©ºé—´
4. æŸ¥çœ‹rsyncæ—¥å¿—

### MySQLä¸»ä»åŒæ­¥å¤±è´¥
1. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š`telnet web_server_ip 3306`
2. æ£€æŸ¥å¤åˆ¶ç”¨æˆ·æƒé™
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
4. æŸ¥çœ‹MySQLé”™è¯¯æ—¥å¿—
5. æ£€æŸ¥ä¸»æœåŠ¡å™¨binlogæ˜¯å¦æ­£å¸¸

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-XX  
**ç»´æŠ¤è€…**: ImageClassifier Team

