# 微信支付配置指南

## 📋 配置步骤

### 1. 获取商户号
✅ **商户号**: `1731030428`

### 2. 获取API密钥

在**微信支付商户平台**中查找：

1. 登录 [微信支付商户平台](https://pay.weixin.qq.com/)
2. 进入 **账户中心** > **API安全** > **API密钥**
3. 如果还没有设置密钥：
   - 点击 **设置** 按钮
   - 输入一个32位的密钥（可以自己生成）
   - 保存后记录下来
4. 如果已经有密钥：
   - 直接复制保存

#### 🔑 生成32位密钥（可选）

如果还没有密钥，可以用以下方法生成：

**Windows PowerShell:**
```powershell
# 生成随机32位密钥
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | ForEach-Object {[char]$_})
```

**Linux Diversion:**
```bash
# 生成随机32位密钥
openssl rand -hex 16
```

### 3. 设置回调URL

在**微信支付商户平台**中：

1. 进入 **产品中心** > **开发配置** > **支付配置**
2. 找到 **支付授权目录** 或 **JSAPI支付**
3. 添加授权域名：`https://www.xintuxiangce.top`
4. 设置支付回调URL：`https://www.xintuxiangce.top/api/v1/payment/notify`

### 4. 配置服务器环境变量

在服务器的 `.env` 文件中添加：

```bash
# 微信支付配置
WECHAT_PAY_MCHID=1731030428
WECHAT_PAY_API_KEY=你的32位API密钥
WECHAT_PAY_NOTIFY_URL=https://www.xintuxiangce.top/api/v1/payment/notify
```

## 🚨 注意事项

1. **API密钥安全**：API密钥是最高权限，请妥善保管，不要泄露
2. **回调URL**：必须是HTTPS，且域名需要备案
3. **测试环境**：可以先在沙箱环境测试，避免产生实际费用
4. **证书配置**：JSAPI支付一般不需要证书，只需要API密钥即可

## 📝 需要的配置信息

请提供以下信息以便完成配置：

- ✅ 商户号：`1731030428`
- ✅ API密钥：已配置
- ✅ 回调URL：`https://www.xintuxiangce.top/api/v1/payment/notify`
- ✅ 授权目录：`https://www.xintuxiangce.top/api/v1/`

## 🔍 如何找到API密钥

如果仍然找不到，可以尝试：

1. 在商户平台搜索框输入 "API密钥"
2. 或者在导航栏直接点击 "API密钥"（可能在安全中心或账户设置下）
3. 联系微信支付客服咨询密钥位置

找到API密钥后，告诉我密钥内容，我会帮你配置到服务器上。

